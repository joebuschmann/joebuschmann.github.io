<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en-us">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Callbacks As Lightning Component Attributes | Joe Buschmann</title>



<link href="/index.xml" rel="alternate" type="application/rss+xml" title="Joe Buschmann" />

<link rel="stylesheet" href="/css/style.css"/><link rel='stylesheet' href='/css/custom.css'><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<link rel="canonical" href="/posts/2016-10-25-callbacks-as-lightning-component-attributes/">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
<section class="section">
  <div class="container">
    <nav id="nav-main" class="nav">
      <div id="nav-name" class="nav-left">
        <a id="nav-anchor" class="nav-item" href="/">
          <h1 id="nav-heading" class="title is-4">Joe Buschmann</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav id="nav-items" class="nav-item level is-mobile"><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/joebuschmann'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="github" href='https://github.com/joebuschmann'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="facebook" href='https://facebook.com/joe.buschmann'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="twitter" href='https://twitter.com/joebuschmann'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="email" href='mailto:joseph.buschmann@gmail.com'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
  <script src="/js/navicon-shift.js"></script>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/salesforce">#salesforce</a>



  
  | <a class="subtitle is-6" href="/tags/lightning-component">#lightning-component</a>
  
  | <a class="subtitle is-6" href="/tags/lightning">#lightning</a>
  

      
    </div>
    <h2 class="subtitle is-6">October 25, 2016</h2>
    <h1 class="title">Callbacks As Lightning Component Attributes</h1>
    
    <div class="content">
      <p>Last week I posed a question on <a href="http://salesforce.stackexchange.com/questions/144087/how-do-i-pass-a-function-as-a-lightning-component-attribute">salesforce.stackexchange.com</a> asking how to pass a function as an attribute in a Lightning Component. As a newbie to the Lightning Component framework (and the Salesforce platform), I found it odd callbacks were not included as one of the <a href="https://developer.salesforce.com/docs/atlas.en-us.lightning.meta/lightning/ref_aura_attribute.htm">supported attribute types</a>. The dearth of responses to my question surprised me. Eventually I found the answer when researching <a href="https://developer.salesforce.com/docs/atlas.en-us.lightning.meta/lightning/events_component.htm">Component Events</a>.</p>
<h4 id="lightning-events">Lightning Events</h4>
<p>Before I elaborate, I have to say the Lightning framework's approach to callbacks or events seems excessive. My previous two web apps used React which has no separate concept of an event. React treats callback functions as any other data, and they are passed through the component hierarchy as attributes. The Lightning approach is to separate callbacks and data (strings, integers, arrays, object). Callbacks are encapsulated into events, and data are defined through strongly typed attributes.</p>
<p>I would prefer the event concept go away altogether and be replaced with a simple callback or function attribute type. Unfortunately, that's not how Lightning works, so I won't belabor the point any further. Instead I'll focus on how you can pass callbacks to your Lightning components using events.</p>
<h4 id="mybuttoncmp">myButton.cmp</h4>
<p>To help illustrate my thoughts, below is a Lightning component called <strong>myButton</strong>. It's a wrapper around the standard <code>&lt;button&gt;</code> element that adds behavior to each click event. The behavior could be tracking for marketing purposes or any other common function. <strong>myButton</strong> exposes a single event named <em>press</em>.</p>
<p><strong>pressEvent.evt</strong></p>
<pre><code>&lt;aura:event type=&quot;COMPONENT&quot; /&gt;
</code></pre><p><strong>myButton.cmp</strong></p>
<pre><code>&lt;aura:component&gt;
    &lt;aura:attribute name=&quot;label&quot; required=&quot;true&quot; type=&quot;String&quot; /&gt;
    &lt;aura:attribute name=&quot;class&quot; required=&quot;false&quot; type=&quot;String&quot; /&gt;

    &lt;!-- Declare the press event of type &quot;pressEvent&quot; --&gt;
    &lt;aura:registerEvent name=&quot;press&quot; type=&quot;c:pressEvent&quot;/&gt;

    &lt;input type=&quot;button&quot; value=&quot;{!v.label}&quot; class=&quot;{!v.class}&quot; onclick=&quot;{!c.onClick}&quot; /&gt;
&lt;/aura:component&gt;
</code></pre><p><strong>myButtonController.js</strong></p>
<pre><code>({
    onClick : function(component, event, helper) {
    	// Do some cross-cutting function like track clicks for analytics
        helper.trackButtonClick(component, event);

        var event = component.getEvent('press');
        event.fire();
    }
})
</code></pre><h4 id="ltaurahandlergt">&lt;aura:handler&gt;</h4>
<p>One way to handle the <em>press</em> event is with an instance of the <code>&lt;aura:handler&gt;</code> element.</p>
<p><strong>myButtonConsumer.cmp</strong></p>
<pre><code>&lt;aura:component&gt;
	&lt;aura:handler name=&quot;press&quot; event=&quot;c:pressEvent&quot; action=&quot;{!c.onPress}&quot;/&gt;

    &lt;c:myButton aura:id=&quot;okButton&quot; label=&quot;OK&quot; class=&quot;slds-button&quot; /&gt;
    &lt;c:myButton aura:id=&quot;cancelButton&quot; label=&quot;Cancel&quot; class=&quot;slds-button&quot; /&gt;
&lt;/aura:component&gt;
</code></pre><p><strong>myButtonConsumerController.js</strong></p>
<pre><code>({
    onPress: function(component, event) {
        alert('Button pressed!');
    }
})
</code></pre><p>In <strong>myButtonConsumer.cmp</strong>, the handler is declared with a name, event, and action. It wires up the onPress method in the controller to the OK and Cancel buttons&rsquo; press events.</p>
<p>One disadvantage of <code>&lt;aura:handler&gt;</code> is there is no easy way to segment the handler function by the source component. In this example, the same handler action is invoked for both buttons. You have to write additional code to determine which component triggered the event.</p>
<pre><code>({
    onPress: function(component, event) {
        if (event.getSource() === component.find('okButton')) {
        	alert ('OK pressed!');
        } else if (event.getSource() === component.find('cancelButton')) {
        	alert('Cancel pressed!');
        }
    }
})
</code></pre><p>Of course, there are times when you would want all press events routed through the same handler, but that would be the exception rather than the rule.</p>
<h4 id="callbacks-as-attributes">Callbacks As Attributes</h4>
<p>The alternative to <code>&lt;aura:handler&gt;</code> is to pass a callback as an attribute. Unfortunately, this isn't clear from the official documentation. I discovered it in the answer to <a href="http://salesforce.stackexchange.com/questions/89757/aurahandler-has-invalid-name-attribute-value#89759">an unrelated Stack Exchange question</a>. Essentially, you can pass event handlers to <code>&lt;aura:registerEvent&gt;</code> the same way you pass data to <code>&lt;aura:attribute&gt;</code>. I'm not sure why the Salesforce documentation doesn't emphasize this more.</p>
<p>With this in mind, you can rewrite <strong>myButtonConsumer</strong> as follows:</p>
<p><strong>myButtonConsumer.cmp</strong></p>
<pre><code>&lt;aura:component&gt;
    &lt;!-- No aura:handler necessary. Just pass the callback as an attribute --&gt;
    &lt;!--&lt;aura:handler name=&quot;press&quot; event=&quot;c:pressEvent&quot; action=&quot;{!c.onOk}&quot;/&gt;--&gt;

    &lt;c:myButton aura:id=&quot;okButton&quot; label=&quot;OK&quot; class=&quot;slds-button&quot; press=&quot;{!c.onOk}&quot; /&gt;
    &lt;c:myButton aura:id=&quot;cancelButton&quot; label=&quot;Cancel&quot; class=&quot;slds-button&quot; press=&quot;{!c.onCancel}&quot; /&gt;
&lt;/aura:component&gt;
</code></pre><p><strong>myButtonConsumerController.js</strong></p>
<pre><code>({
    onOk: function(component, event) {
        alert('OK pressed!');
    },

    onCancel: function(component, event) {
        alert('Cancel pressed!');
    }
})
</code></pre><p>That's it. The <code>press</code> event is wired up to the controller via an attribute. The <code>&lt;aura:handler&gt;</code> element goes away. I much prefer this approach. It requires one fewer element and better encapsulates component markup.</p>
<h4 id="wheres-the-documentation">Where's the Documentation?</h4>
<p>I'm not sure why Saleforce chooses not to document the second approach to event handling. Maybe it is deprecated? I doubt it. My best guess is <code>&lt;aura:handler&gt;</code> is their preferred way.</p>
<p>If anyone has an answer, I'd love to hear from you in the comments.</p>

      
    </div>
    
  </div>
</section>


<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
  
    <script type="text/javascript">
      var disqus_shortname = 'joebuschmann';
      function disqus() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }
  
      disqus();
  

    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; Joe Buschmann 2020</p>
    
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-64657873-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




</body>
</html>

