<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en-us">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Gherkin Tips | Joe Buschmann</title>



<link href="/index.xml" rel="alternate" type="application/rss+xml" title="Joe Buschmann" />

<link rel="stylesheet" href="/css/style.css"/><link rel='stylesheet' href='/css/custom.css'><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<link rel="canonical" href="/posts/2018/08/gherkin-tips/">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
<section class="section">
  <div class="container">
    <nav id="nav-main" class="nav">
      <div id="nav-name" class="nav-left">
        <a id="nav-anchor" class="nav-item" href="/">
          <h1 id="nav-heading" class="title is-4">Joe Buschmann</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav id="nav-items" class="nav-item level is-mobile"><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/joebuschmann'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="github" href='https://github.com/joebuschmann'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="facebook" href='https://facebook.com/joe.buschmann'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="twitter" href='https://twitter.com/joebuschmann'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="email" href='mailto:joseph.buschmann@gmail.com'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="rss" href='/index.xml'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
  <script src="/js/navicon-shift.js"></script>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/specflow">#specflow</a>



  
  | <a class="subtitle is-6" href="/tags/gherkin">#gherkin</a>
  

      
    </div>
    <h2 class="subtitle is-6">August 10, 2018</h2>
    <h1 class="title">Gherkin Tips</h1>
    
    <div class="content">
      <blockquote>
<p>[Gherkin] is a Business Readable, Domain Specific Language that lets you describe software's behaviour without detailing how that behaviour is implemented.
- Gherkin Wiki</p>
</blockquote>
<p>These Gherkin best practices were originally included in an early draft of a <a href="https://joebuschmann.github.io/scaling-specflow/">talk I gave on SpecFlow</a>. Ultimately, I took them out because they didn't fit well with the topic, so I put them into a blog post.</p>
<h3 id="table-values-should-be-atomic">Table values should be atomic</h3>
<p>Bindings that take a table argument will almost always convert the table to a C# object for easy manipulation. With this in mind, Gherkin steps should make using tables in code straightforward, meaning values should be as atomic as possible. The sample below uses a single table to create a customer and an address. Each table field, Name and Address, crams in complex data that the binding has to parse. Parsing table values is an indication they should be broken up into smaller pieces.</p>
<pre><code class="language-gherkin" data-lang="gherkin">Scenario: Build a customer
  Given the customer
    | Name           | Address                                   |
    | Miss Liz Lemon | 30 Rockefeller Plaza; New York; NY; 10112 |
</code></pre><p>A better approach is to create two steps: one for the customer and one for the address. Each discrete piece of data should have its own column in the table. The name is broken up into Salutation, First Name, and Last Name columns. The address step has columns for Line 1, City, State, and Zipcode.</p>
<pre><code class="language-gherkin" data-lang="gherkin">Scenario: Build a customer
  Given the customer
    | Salutation | First Name | Last Name |
    | Miss       | Liz        | Lemon     |
  And the address
    | Line 1                | City     | State | Zipcode |
    | 30 Rockefeller Plaza  | New York | NY    | 10112   |
</code></pre><h3 id="use-natural-language-instead-of-tech-speak">Use natural language instead of tech speak</h3>
<p>By design, Gherkin should use natural language accessible to business owners. Tech speak has a tendency to sneak in over time. This example contains text referring to an index of a list or array. It makes sense to engineers but may be confusing to the business.</p>
<pre><code class="language-gherkin" data-lang="gherkin">When I remove the product at index 5
</code></pre><p>You can take advantage of regular expressions to refactor this step to use the more natural language, &ldquo;the 5th product&rdquo;, and still extract the index value in the binding.</p>
<pre><code class="language-gherkin" data-lang="gherkin">When I remove the 5th product
</code></pre><h3 id="avoid-numeric-ids">Avoid numeric IDs</h3>
<p>Many integration test suites will use a well known data set to drive the tests. These data may be in a file, database, or available via a web service. Over time test engineers will memorize the numeric identifiers for entities used in common scenarios and start to refer to the entity IDs rather than a descriptive name. Try to avoid using these IDs in Gherkin.</p>
<pre><code class="language-gherkin" data-lang="gherkin">Scenario: Update price
  Given the product with ID 46
  When the price is updated to $199.00
  Then the price should be saved
</code></pre><p>Outside of engineering, no one knows what product 46 is. You can make this better by defining a map of descriptive names to IDs in a feature's background steps. The Gherkin uses the name while the steps map the incoming name to its ID. In this case, product 46 maps to the more descriptive identifier &ldquo;iPhone 6&rdquo;.</p>
<pre><code class="language-gherkin" data-lang="gherkin">Background:
  Given I have the following products
    | Id | Name       |
    | 45 | Galaxy S5  |
    | 46 | iPhone 6   |
    | 47 | Nokia Icon |
 
Scenario: Update price
  Given the product &quot;iPhone 6&quot;
  When the price is updated to $199.00
  Then the price should be saved
</code></pre><h3 id="put-rules-and-equations-in-the-feature-file-description">Put rules and equations in the feature file description</h3>
<p>The feature header and description is a good place to define the rules and equations under test. If you're validating an insurance quoting engine, you can describe its rules at the top and avoid cluttering the scenarios with details of the algorithm.</p>
<pre><code class="language-gherkin" data-lang="gherkin">Feature: Insurance Quote
  Test the quoting engine.
</code></pre><p>An obvious and lazy description helps no one. You might as well leave it out. A good description describes the algorithm you're testing. In this case, the insurance quote engine starts with a baseline price and adjusts it up or down based on the insured's individual risk and their neighbor's risk.</p>
<pre><code class="language-gherkin" data-lang="gherkin">Feature: Insurance Quote
  Quotes begin with a baseline price.
  It is adjusted by the insured individual's risk score.
  It is further adjusted by other scores from people
    living near the insured.
  quote = baseline *
    (individual adjustment + weight * (co-located adjustment - 1))
</code></pre><p>The following scenarios simply plug in the numbers and validate the final quote.</p>
<pre><code class="language-gherkin" data-lang="gherkin">Scenario Outline: Calculate Quote
  Given a baseline price of $&lt;baseline&gt;
  And an individual adjustment of &lt;indvAdjustment&gt;
  And a co-located adjustment of &lt;coLocAdjustment&gt; and weight of &lt;weight&gt;
  When I calculate the final quote
  Then the amount should be $&lt;amount&gt;

Examples:
  | baseline | indvAdjustment | coLocAdjustment | weight | amount |
  | 50       | 0.90           | 0.95            | 0.50   | 43.75  |
  | 50       | 1.15           | 1.30            | 0.50   | 65.00  |
</code></pre><hr />
<p>There are many more tips for writing effective Gherkin, but I've found these to be the most unique and useful. For more tips, check out the links below.</p>
<ul>
<li><a href="https://www.engineyard.com/blog/15-expert-tips-for-using-cucumber">15 Expert Tips for Using Cucumber</a></li>
<li><a href="https://www.foreach.be/blog/9-tips-improving-cucumber-test-readability">9 tips for improving Cucumber test readability</a></li>
<li><a href="https://automationpanda.com/2017/01/30/bdd-101-writing-good-gherkin/">BDD 101: Writing Good Gherkin</a></li>
</ul>

      
    </div>
    
  </div>
</section>


<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
  
    <script type="text/javascript">
      var disqus_shortname = 'joebuschmann';
      function disqus() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }
  
      disqus();
  

    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; Joe Buschmann 2020</p>
    
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-64657873-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




</body>
</html>

